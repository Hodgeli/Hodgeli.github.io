<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>我的追寻</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="进一寸有一寸的欢喜">
<meta property="og:type" content="website">
<meta property="og:title" content="我的追寻">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="我的追寻">
<meta property="og:description" content="进一寸有一寸的欢喜">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="我的追寻">
<meta name="twitter:description" content="进一寸有一寸的欢喜">
  
    <link rel="alternate" href="/atom.xml" title="我的追寻" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">我的追寻</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">进一寸有一寸的欢喜</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-LeetCode-Outline" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/07/11/LeetCode-Outline/" class="article-date">
  <time datetime="2019-07-11T02:52:10.000Z" itemprop="datePublished">2019-07-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/LeetCode/">LeetCode</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2019/07/11/LeetCode-Outline/">LeetCode_Outline</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>正式刷LeetCode啦，因为官方的题目只有分类而缺少题目之间的关联。<br>有幸找到一位博主为LeetCode的题目做了二次分类整理，非常适合刷刷刷。<br><a href="https://cspiration.com/leetcodeClassification" target="_blank" rel="noopener">这是该博主原文链接</a></p>
<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><p>下面是我刷题总结的博文索引<br>包括题解分析和代码  </p>
<h4 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h4><table>
<thead>
<tr>
<th style="text-align:center">题目ID</th>
<th style="text-align:center">题解</th>
<th style="text-align:center">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">基础</td>
<td style="text-align:center">&nbsp;</td>
<td style="text-align:center">&nbsp;</td>
</tr>
<tr>
<td style="text-align:center">27</td>
<td style="text-align:center"><a href="https://hodgeli.github.io/2019/07/11/LeetCode-Array/#27-移除元素" target="_blank" rel="noopener">移除元素</a></td>
<td style="text-align:center">&nbsp;</td>
</tr>
<tr>
<td style="text-align:center">26</td>
<td style="text-align:center"><a href="https://hodgeli.github.io/2019/07/11/LeetCode-Array/#26-删除排序数组中的重复项" target="_blank" rel="noopener">删除排序数组中的重复项</a></td>
<td style="text-align:center">&nbsp;</td>
</tr>
<tr>
<td style="text-align:center">80</td>
<td style="text-align:center"><a href="https://hodgeli.github.io/2019/07/11/LeetCode-Array/#80-删除排序数组中的重复项-II" target="_blank" rel="noopener">删除排序数组中的重复项 II</a></td>
<td style="text-align:center">&nbsp;</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/11/LeetCode-Outline/" data-id="cl8vfrwpz0009ogc58jvn92ko" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/LeetCode/">LeetCode</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-object-detect" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/13/object-detect/" class="article-date">
  <time datetime="2018-11-13T02:01:34.000Z" itemprop="datePublished">2018-11-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/目标检测/">目标检测</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/13/object-detect/">object_detect</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="py-faster-rcnn"><a href="#py-faster-rcnn" class="headerlink" title="py-faster-rcnn"></a>py-faster-rcnn</h4><p>Faster R-CNN是一种object detection算法，这里记录下Faster R-CNN的Caffe、python实现。<br>git地址：<a href="https://github.com/rbgirshick/py-faster-rcnn" target="_blank" rel="noopener">https://github.com/rbgirshick/py-faster-rcnn</a></p>
<h4 id="安装py-faster-rcnn"><a href="#安装py-faster-rcnn" class="headerlink" title="安装py-faster-rcnn"></a>安装py-faster-rcnn</h4><h5 id="Clone-the-py-faster-rcnn"><a href="#Clone-the-py-faster-rcnn" class="headerlink" title="Clone the py-faster-rcnn"></a>Clone the py-faster-rcnn</h5><p>就是从github把源码下载下来，由于网络等原因，切记核对源代码是否下载完整。</p>
<h5 id="Makefile-config"><a href="#Makefile-config" class="headerlink" title="Makefile.config"></a>Makefile.config</h5><p>配置编译caffe所需的配置文件：<br>文件内容说明：<br>1、 将makefile.config里面的 WITH_PYTHON_LAYER :=1前面的注释去掉，这是因为faster R-CNN是要Python接口的，所以这一项要有，不能注释。<br>2、 # Whatever else you find you need goes here.<br>INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial<br>LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/lib /usr/lib /usr/lib/x86_64-linux-gnu /usr/lib/x86_64-linux-gnu/hdf5/serial<br>此处其实就是加上了hdf5的路径<br>3、 在编译caffe的Mkefile.config时遇到提示</p>
<p>nvcc warning : The ‘compute_20’, ‘sm_20’, and ‘sm_21’ architectures are deprecated, and may be removed in a future release (Use -Wno-deprecated-gpu-targets to suppress warning).</p>
<p>原因是，Makefile.config中采用了CUDA的compute capability 2.0和2.1，这是两种计算能力。从CUDA 8.0开始compute capability 2.0和2.1被弃用了，所以可以将-gencode arch=compute_20,code=sm_20 和-gencode arch=compute_20,code=sm_21这两行删除即可。<br>4、 # CUDA directory contains bin/ and lib/ directories that we need.<br>CUDA_DIR := /usr/local/cuda<br>cuda路径不可错，若机器上安装过两个cuda，此处配置应与~/.bashrc中配置的路径一致</p>
<p>将 Makefile.config复制到py-faster-rcnn/目录下</p>
<h4 id="修改caffe-fast-rcnn"><a href="#修改caffe-fast-rcnn" class="headerlink" title="修改caffe-fast-rcnn"></a>修改caffe-fast-rcnn</h4><p>但是由于代码提供者的caffe版本是老版本的，没有”与时俱进“，所以只兼容CUDNN 较老版本的。对于新的版本的，直接编译会报错。<br>参考链接：<a href="https://blog.csdn.net/u010733679/article/details/52221404" target="_blank" rel="noopener">https://blog.csdn.net/u010733679/article/details/52221404</a><br>其中给出了两种方法：<br>一种是到github去下载新版的caffe并将它与py-faster-rcnn中的caffe-faster-rcnn合并，更换成新版的caffe，使其支持新的cuDNN版本；<br>另一种是自己手动更改一些文件，更改caffe的一些配置使其兼容新的cuDNN。<br>第一种方法较简单，但是一旦工程被修改过就很容易出错，不推荐；所以我采用了第二种方法。<br>1、用最新版本的caffe源码目录中的如下文件替换py-faster-rcnn/caffe-fast-rcnn中的对应文件。</p>
<pre><code>include/caffe/layers/cudnn_relu_layer.hpp,
src/caffe/layers/cudnn_relu_layer.cpp,
src/caffe/layers/cudnn_relu_layer.cu

include/caffe/layers/cudnn_sigmoid_layer.hpp,
src/caffe/layers/cudnn_sigmoid_layer.cpp,
src/caffe/layers/cudnn_sigmoid_layer.cu

include/caffe/layers/cudnn_tanh_layer.hpp,
src/caffe/layers/cudnn_tanh_layer.cpp,
src/caffe/layers/cudnn_tanh_layer.cu
</code></pre><p>2、用caffe源码中的这个文件替换掉faster rcnn 对应文件</p>
<pre><code>include/caffe/util/cudnn.hpp
</code></pre><p>3、打开 py-faster-rcnn/caffe-fast-rcnn 中的 src/caffe/layers/cudnn_conv_layer.cu文件，并将：</p>
<pre><code>cudnnConvolutionBackwardData_v3
替换为
cudnnConvolutionBackwardData

cudnnConvolutionBackwardFilter_v3
替换为
cudnnConvolutionBackwardFilter
</code></pre><h3 id="编译Cython-modules"><a href="#编译Cython-modules" class="headerlink" title="编译Cython modules"></a>编译Cython modules</h3><p>进入目录：py-faster-rcnn/lib<br>将Makefile文件中的python改为python2   因为此机器默认python版本为3.X<br>在终端中运行“make” 开始编译</p>
<h3 id="编译-Caffe-and-pycaffe"><a href="#编译-Caffe-and-pycaffe" class="headerlink" title="编译 Caffe and pycaffe"></a>编译 Caffe and pycaffe</h3><p>打开py-faster-rcnn/caffe-fast-rcnn<br>终端执行“make -j8 &amp;&amp; make pycaffe”</p>
<h3 id="运行demo"><a href="#运行demo" class="headerlink" title="运行demo"></a>运行demo</h3><h4 id="获取faster-rcnn-models"><a href="#获取faster-rcnn-models" class="headerlink" title="获取faster_rcnn_models"></a>获取faster_rcnn_models</h4><p>参考<a href="https://blog.csdn.net/a8039974/article/details/77628805" target="_blank" rel="noopener">https://blog.csdn.net/a8039974/article/details/77628805</a></p>
<h4 id="获取imagenet-models"><a href="#获取imagenet-models" class="headerlink" title="获取imagenet_models"></a>获取imagenet_models</h4><p>参考<a href="https://blog.csdn.net/a8039974/article/details/77628805" target="_blank" rel="noopener">https://blog.csdn.net/a8039974/article/details/77628805</a></p>
<p>将这两个文件夹复制到/home/ubuntu/lihaizhou/py-faster-rcnn/data</p>
<p>回到路径/home/ubuntu/lihaizhou/py-faster-rcnn/<br>在终端执行“python2 tools/demo.py”<br>如果运行正常会自动弹出标注成功的图片</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/13/object-detect/" data-id="cl8vfrwrw0026ogc5jld18mwf" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/caffe/">caffe</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/object-detect/">object_detect</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-scrapy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/08/02/scrapy/" class="article-date">
  <time datetime="2018-08-02T07:28:59.000Z" itemprop="datePublished">2018-08-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/爬虫/">爬虫</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/08/02/scrapy/">scrapy</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><p>Scrapy，Python开发的一个快速、高层次的屏幕抓取和web抓取框架，用于抓取web站点并从页面中提取结构化的数据。Scrapy用途广泛，可以用于数据挖掘、监测和自动化测试。</p>
<h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p>依赖：</p>
<ol>
<li>Python 2.7</li>
<li>Python Package: pip and setuptools. 现在 pip 依赖 setuptools ，如果未安装，则会自动安装 setuptools 。</li>
<li>lxml. 大多数Linux发行版自带了lxml。如果缺失，请查看<a href="http://lxml.de/installation.html" target="_blank" rel="noopener">http://lxml.de/installation.html</a></li>
<li>OpenSSL. 除了Windows之外的系统都已经提供。</li>
</ol>
<p>使用pip安装scrapy<code>pip install Scrapy</code></p>
<h5 id="基本配置"><a href="#基本配置" class="headerlink" title="基本配置"></a>基本配置</h5><h6 id="user-agent"><a href="#user-agent" class="headerlink" title="user_agent"></a>user_agent</h6><p>大多数情况下，网站都会根据我们的请求头信息来区分你是不是一个爬虫程序，如果一旦识别出这是一个爬虫程序，很容易就会拒绝我们的请求，因此我们需要给我们的爬虫手动添加请求头信息，来模拟浏览器的行为，但是当我们需要大量的爬取某一个网站的时候，一直使用同一个User-Agent显然也是不够的，因此，我们本节的内容就是学习在scrapy中设置随机的User-Agent。<br>首先在settings.py文件中添加如下的信息。<br><figure class="highlight smalltalk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MY_USER_AGENT</span> = [</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; AcooBrowser; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Acoo Browser; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 7.0; AOL 9.5; AOLBuild 4337.35; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.20 (KHTML, like Gecko) Chrome/19.0.1036.7 Safari/535.20"</span>,</span><br><span class="line">    <span class="comment">"Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.11 TaoBrowser/2.0 Safari/536.11"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.71 Safari/537.1 LBBROWSER"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; LBBROWSER)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E; LBBROWSER)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.84 Safari/535.11 LBBROWSER"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; QQBrowser/7.0.3698.400)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SV1; QQDownload 732; .NET4.0C; .NET4.0E; 360SE)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (iPad; U; CPU OS 4_2_1 like Mac OS X; zh-cn) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:2.0b13pre) Gecko/20110307 Firefox/4.0b13pre"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (X11; U; Linux x86_64; zh-CN; rv:1.9.2.10) Gecko/20100922 Ubuntu/10.10 (maverick) Firefox/3.6.10"</span>,</span><br><span class="line">    <span class="comment">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/58.0.3029.110 Safari/537.36"</span>,</span><br><span class="line">    ]</span><br></pre></td></tr></table></figure></p>
<p>而后，在middlewares.py文件中添加如下的信息<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> signals</span><br><span class="line"><span class="keyword">from</span> scrapy.downloadermiddlewares.useragent <span class="keyword">import</span> UserAgentMiddleware</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyUserAgentMiddleware</span><span class="params">(UserAgentMiddleware)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    设置User-Agent</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, user_agent)</span>:</span></span><br><span class="line">        self.user_agent = user_agent</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">from_crawler</span><span class="params">(cls, crawler)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> cls(</span><br><span class="line">            user_agent=crawler.settings.get(<span class="string">'USER_AGENTS_LIST'</span>)</span><br><span class="line">        )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_request</span><span class="params">(self, request, spider)</span>:</span></span><br><span class="line">        agent = random.choice(self.user_agent)</span><br><span class="line">        request.headers[<span class="string">'User-Agent'</span>] = agent</span><br></pre></td></tr></table></figure></p>
<p>最后一步，就是将我们自定义的这个MyUserAgentMiddleware类添加到DOWNLOADER_MIDDLEWARES<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">    'projectname.middlewares.MyUserAgentMiddleware': 400,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h5 id="hello-xici"><a href="#hello-xici" class="headerlink" title="hello xici"></a>hello xici</h5><p><a href="http://www.xicidaili.com/" target="_blank" rel="noopener">http://www.xicidaili.com/</a><br>每日更新免费HTTP代理。国内每个省的http匿名代理实时更新,可以根据你的需要分批提取。<br>spider：xici.py<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">from</span> science.items <span class="keyword">import</span> ScienceItem</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">XiciSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'xici'</span></span><br><span class="line">    allowed_domains = [<span class="string">'xicidaili.com'</span>]</span><br><span class="line">    start_urls = [<span class="string">'http://xicidaili.com/'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span>   <span class="comment"># 制作链接</span></span><br><span class="line">        reqs = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">            req = scrapy.Request(<span class="string">"http://www.xicidaili.com/nn/%s"</span> % i)</span><br><span class="line">            reqs.append(req)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> reqs</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        trs = response.xpath(<span class="string">'//table/tr'</span>)</span><br><span class="line"></span><br><span class="line">        items = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> tr <span class="keyword">in</span> trs[<span class="number">1</span>:]:</span><br><span class="line">            pre_item = ScienceItem()</span><br><span class="line">            pre_item[<span class="string">'IP'</span>] = tr.xpath(<span class="string">'td[2]/text()'</span>).extract_first()</span><br><span class="line">            pre_item[<span class="string">'PORT'</span>] = tr.xpath(<span class="string">'td[3]/text()'</span>).extract_first()</span><br><span class="line">            pre_item[<span class="string">'POSITION'</span>] = tr.xpath(<span class="string">'td[4]/a/text()'</span>).extract_first()</span><br><span class="line">            pre_item[<span class="string">'TYPE'</span>] = tr.xpath(<span class="string">'td[5]/text()'</span>).extract_first()</span><br><span class="line">            pre_item[<span class="string">'SPEED'</span>] = tr.xpath(<span class="string">'td[7]/div/@title'</span>).extract_first()</span><br><span class="line">            pre_item[<span class="string">'LAST_CHECK_TIME'</span>] = tr.xpath(<span class="string">'td[10]/text()'</span>).extract_first()</span><br><span class="line">            items.append(pre_item)</span><br><span class="line">        <span class="keyword">return</span> items</span><br></pre></td></tr></table></figure></p>
<p>数据存储：pipelines.py<br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">import MySQLdb</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class SciencePipeline(object):</span><br><span class="line">    def process_item(self, <span class="keyword">item</span>, spider):</span><br><span class="line">        DBKWAGS = spider.settings.<span class="built_in">get</span>(<span class="string">'DBKWAGS'</span>)</span><br><span class="line">        con = MySQLdb.connect(**DBKWAGS)</span><br><span class="line">        cur = con.cursor()</span><br><span class="line">        sql = (<span class="string">"insert into xici (IP, PORT,TYPE,POSITION ,SPEED,LAST_CHECK_TIME) "</span></span><br><span class="line">               <span class="string">"value (%s,%s,%s,%s,%s,%s)"</span>)</span><br><span class="line">        lis = (<span class="keyword">item</span>[<span class="string">'IP'</span>], <span class="keyword">item</span>[<span class="string">'PORT'</span>], <span class="keyword">item</span>[<span class="string">'TYPE'</span>], <span class="keyword">item</span>[<span class="string">'POSITION'</span>], <span class="keyword">item</span>[<span class="string">'SPEED'</span>], <span class="keyword">item</span>[<span class="string">'LAST_CHECK_TIME'</span>])</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            cur.execute(sql, lis)</span><br><span class="line">        except:</span><br><span class="line">            print(<span class="string">"Insert error"</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            con.commit()</span><br><span class="line">        cur.<span class="built_in">close</span>()</span><br><span class="line">        con.<span class="built_in">close</span>()</span><br><span class="line">        <span class="literal">return</span> <span class="keyword">item</span></span><br></pre></td></tr></table></figure></p>
<p>设置文件：settings.py<br><figure class="highlight vala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">BOT_NAME = <span class="string">'science'</span></span><br><span class="line"></span><br><span class="line">SPIDER_MODULES = [<span class="string">'science.spiders'</span>]</span><br><span class="line">NEWSPIDER_MODULE = <span class="string">'science.spiders'</span></span><br><span class="line"></span><br><span class="line"><span class="meta"># 数据库参数配置</span></span><br><span class="line">DBKWAGS = &#123;<span class="string">'db'</span>: <span class="string">'crawl'</span>, <span class="string">'user'</span>: <span class="string">'root'</span>, <span class="string">'passwd'</span>: <span class="string">''</span>,</span><br><span class="line">           <span class="string">'host'</span>: <span class="string">'localhost'</span>, <span class="string">'use_unicode'</span>: True, <span class="string">'charset'</span>: <span class="string">'utf8'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta"># Obey robots.txt rules</span></span><br><span class="line">ROBOTSTXT_OBEY = False</span><br><span class="line"></span><br><span class="line"><span class="meta"># Enable or disable downloader middlewares</span></span><br><span class="line"><span class="meta"># See https://doc.scrapy.org/en/latest/topics/downloader-middleware.html</span></span><br><span class="line">DOWNLOADER_MIDDLEWARES = &#123;</span><br><span class="line">    <span class="string">'science.middlewares.ScienceDownloaderMiddleware'</span>: <span class="number">543</span>,</span><br><span class="line">    <span class="string">'science.middlewares.MyUserAgentMiddleware'</span>: <span class="number">400</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta"># Configure item pipelines</span></span><br><span class="line"><span class="meta"># See https://doc.scrapy.org/en/latest/topics/item-pipeline.html</span></span><br><span class="line">ITEM_PIPELINES = &#123;</span><br><span class="line">    <span class="string">'science.pipelines.SciencePipeline'</span>: <span class="number">300</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">USER_AGENTS_LIST = [</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; AcooBrowser; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; Acoo Browser; SLCC1; .NET CLR 2.0.50727; Media Center PC 5.0; .NET CLR 3.0.04506)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 7.0; AOL 9.5; AOLBuild 4337.35; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows; U; MSIE 9.0; Windows NT 9.0; en-US)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 2.0.50727; Media Center PC 6.0)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET CLR 1.0.3705; .NET CLR 1.1.4322)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 7.0b; Windows NT 5.2; .NET CLR 1.1.4322; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.0.04506.30)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN) AppleWebKit/523.15 (KHTML, like Gecko, Safari/419.3) Arora/0.3 (Change: 287 c9dfb30)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (X11; U; Linux; en-US) AppleWebKit/527+ (KHTML, like Gecko, Safari/419.3) Arora/0.6"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.2pre) Gecko/20070215 K-Ninja/2.1.1"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-CN; rv:1.9) Gecko/20080705 Firefox/3.0 Kapiko/3.0"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (X11; Linux i686; U;) Gecko/20070322 Kazehakase/0.4.5"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.8) Gecko Fedora/1.9.0.8-1.fc10 Kazehakase/0.5.6"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_3) AppleWebKit/535.20 (KHTML, like Gecko) Chrome/19.0.1036.7 Safari/535.20"</span>,</span><br><span class="line">    <span class="string">"Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; fr) Presto/2.9.168 Version/11.52"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.11 TaoBrowser/2.0 Safari/536.11"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.71 Safari/537.1 LBBROWSER"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; LBBROWSER)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E; LBBROWSER)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.84 Safari/535.11 LBBROWSER"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E; QQBrowser/7.0.3698.400)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SV1; QQDownload 732; .NET4.0C; .NET4.0E; 360SE)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1; SV1; QQDownload 732; .NET4.0C; .NET4.0E)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/5.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows NT 5.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (iPad; U; CPU OS 4_2_1 like Mac OS X; zh-cn) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8C148 Safari/6533.18.5"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:2.0b13pre) Gecko/20110307 Firefox/4.0b13pre"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:16.0) Gecko/20100101 Firefox/16.0"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.11 (KHTML, like Gecko) Chrome/23.0.1271.64 Safari/537.11"</span>,</span><br><span class="line">    <span class="string">"Mozilla/5.0 (X11; U; Linux x86_64; zh-CN; rv:1.9.2.10) Gecko/20100922 Ubuntu/10.10 (maverick) Firefox/3.6.10"</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/08/02/scrapy/" data-id="cl8vfrwss0034ogc5qcr0av2z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/scrapy/">scrapy</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-raspbian-mysql" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/31/raspbian-mysql/" class="article-date">
  <time datetime="2018-07-31T09:14:07.000Z" itemprop="datePublished">2018-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/raspbian/">raspbian</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/31/raspbian-mysql/">raspbian_mysql</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="安装mysql"><a href="#安装mysql" class="headerlink" title="安装mysql"></a>安装mysql</h5><p>使用管理员权限运行apt-get获取最新的MySQL及Python编程接口（之后用于数据库编程）：<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install mysql-server python-mysqldb</span><br></pre></td></tr></table></figure></p>
<p>安装如果失败则按照上篇博文raspbian_sources更换源<br>安装成功后直接结束，并未提示输入数据库密码</p>
<h5 id="密码设置"><a href="#密码设置" class="headerlink" title="密码设置"></a>密码设置</h5><p>参考：<br>sudo mysql -u root -p</p>
<p>select Host,User,plugin from mysql.user where User=’root’;</p>
<p>plugin(加密方式)是unix_socket</p>
<p>运行如下三条命令：<br><figure class="highlight n1ql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> mysql.<span class="keyword">user</span> <span class="keyword">set</span> plugin=<span class="string">'mysql_native_password'</span>; #重置加密方式</span><br><span class="line"><span class="keyword">update</span> mysql.<span class="keyword">user</span> <span class="keyword">set</span> <span class="keyword">password</span>=<span class="keyword">PASSWORD</span>(<span class="string">"newpassword"</span>) <span class="keyword">where</span> <span class="keyword">User</span>=<span class="string">'root'</span>; #设置新密码</span><br><span class="line">flush privileges; #刷新权限信息</span><br></pre></td></tr></table></figure></p>
<h5 id="远程访问"><a href="#远程访问" class="headerlink" title="远程访问"></a>远程访问</h5><p>修改配置文件：/etc/mysql/mariadb.conf.d/50-server.cnf<br>注释掉bind-address项</p>
<p>只有这些仍然不够，我们只是开启了MySQL监听远程连接的选项，接下来需要给对应的MySQL账户分配权限，允许使用该账户远程连接到MySQL</p>
<p>查看账号信息：<code>select User, host from mysql.user;</code></p>
<p>root账户中的host项是localhost表示该账号只能进行本地登录，我们需要修改权限，输入命令：<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'root'</span>@<span class="string">'%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'password'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br></pre></td></tr></table></figure></p>
<p>修改权限。%表示针对所有IP，password表示将用这个密码登录root用户，如果想只让某个IP段的主机连接，可以修改为<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> ALL <span class="keyword">PRIVILEGES</span> <span class="keyword">ON</span> *.* <span class="keyword">TO</span> <span class="string">'root'</span>@<span class="string">'192.168.100.%'</span> <span class="keyword">IDENTIFIED</span> <span class="keyword">BY</span> <span class="string">'my-new-password'</span> <span class="keyword">WITH</span> <span class="keyword">GRANT</span> <span class="keyword">OPTION</span>;</span><br></pre></td></tr></table></figure></p>
<p>注意：此时远程连接的密码可能与你在本地登录时的密码不同了，主要看你在IDENTIFIED BY后面给了什么密码<br>最后别忘了<code>FLUSH PRIVILEGES;</code></p>
<p>重启数据库<code>sudo /etc/init.d/mysql restart</code></p>
<p>如果这些都做完了，还是不能连接，可以看一下端口是不是被防火墙拦截了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/31/raspbian-mysql/" data-id="cl8vfrwsc002rogc5vjjm9v3d" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/mysql/">mysql</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/raspbian/">raspbian</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-raspbian-sources" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/31/raspbian-sources/" class="article-date">
  <time datetime="2018-07-31T08:38:56.000Z" itemprop="datePublished">2018-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/raspbian/">raspbian</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/31/raspbian-sources/">raspbian_sources</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>引用自：<a href="https://www.jianshu.com/p/67b9e6ebf8a0" target="_blank" rel="noopener">https://www.jianshu.com/p/67b9e6ebf8a0</a></p>
<h5 id="树莓派基金会提供的源"><a href="#树莓派基金会提供的源" class="headerlink" title="树莓派基金会提供的源"></a>树莓派基金会提供的源</h5><p>/etc/apt/sources.list.d/raspi.list里的软件源是树莓派基金会单独（非Raspbian开发者）提供/维护的软件源，主要包括raspi-config、minecraftpi、树莓派桌面环境、内核固件驱动等少量软件。<br>这个软件源相关资料比较少，国内目前只有清华（201709开始提供）和中科大有提供</p>
<p>Stretch（三选其一即可）<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">中科大</span><br><span class="line"><span class="keyword">deb</span> http<span class="variable">s:</span>//mirrors.ustc.edu.<span class="keyword">cn</span>/archive.raspberrypi.org/ stretch main ui</span><br><span class="line">清华</span><br><span class="line"><span class="keyword">deb</span> http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/raspberrypi/ stretch main ui</span><br><span class="line">默认官方源</span><br><span class="line"><span class="keyword">deb</span> http://archive.raspberrypi.org/debian/ stretch main ui</span><br></pre></td></tr></table></figure></p>
<p>Jessie（三选其一即可）<br><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">中科大</span><br><span class="line"><span class="keyword">deb</span> http<span class="variable">s:</span>//mirrors.ustc.edu.<span class="keyword">cn</span>/archive.raspberrypi.org/ jessie main ui</span><br><span class="line">清华</span><br><span class="line"><span class="keyword">deb</span> http<span class="variable">s:</span>//mirrors.tuna.tsinghua.edu.<span class="keyword">cn</span>/raspberrypi/ jessie main ui</span><br><span class="line">默认官方源</span><br><span class="line"><span class="keyword">deb</span> http://archive.raspberrypi.org/debian/ jessie main ui</span><br></pre></td></tr></table></figure></p>
<h5 id="Raspbian源"><a href="#Raspbian源" class="headerlink" title="Raspbian源"></a>Raspbian源</h5><p>raspbian这个源是由独立开发者维护的，与树莓派基金会并无直接联系。国内源比较多，选择一个与自己延迟最小或连接速度最好或物理距离最短的即可。<br>无需担心各个软件源内容上会有不同，基本上各个站点每天都会同步一次，绝大部分情况下某软件安装不了与用了哪个站点提供的源无关。<br>通常位于/etc/apt/sources.list</p>
<p>Stretch（选择其中一个即可，注意大小写及目录）<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">中科大</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.ustc.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi </span></span><br><span class="line">清华</span><br><span class="line">deb <span class="string">https:</span><span class="comment">//mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi</span></span><br><span class="line">大连东软</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.neusoft.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi</span></span><br><span class="line">重庆大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.cqu.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi</span></span><br><span class="line">浙江大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.zju.edu.cn/raspbian/raspbian/ stretch main contrib non-free rpi</span></span><br><span class="line">阿里云</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.aliyun.com/raspbian/raspbian/ stretch main contrib non-free rpi </span></span><br><span class="line">搜狐</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.sohu.com/raspbian/raspbian/ stretch main contrib non-free rpi </span></span><br><span class="line">元智大学（中国台湾）</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//ftp.cse.yzu.edu.tw/Linux/raspbian/raspbian/ stretch main contrib non-free rpi </span></span><br><span class="line">新加坡国立大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirror.nus.edu.sg/raspbian/raspbian/ stretch main contrib non-free rpi</span></span><br><span class="line">北陆先端科学技术大学院大学（日本知名镜像站，日常出口带宽<span class="number">2</span>g）</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//ftp.jaist.ac.jp/raspbian/ stretch main contrib non-free rpi</span></span><br><span class="line">牛津大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirror.ox.ac.uk/sites/archive.raspbian.org/archive/raspbian/  stretch main contrib non-free rpi</span></span><br><span class="line">美国Berkely大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.ocf.berkeley.edu/raspbian/raspbian/ stretch main contrib non-free rpi</span></span><br><span class="line">美国俄克拉荷马大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//reflection.oss.ou.edu/raspbian/raspbian/ stretch main contrib non-free rpi</span></span><br><span class="line">南非知名软件源</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirror.liquidtelecom.com/raspbian/raspbian/ stretch main contrib non-free rpi </span></span><br><span class="line">默认源（带重定向by mirrorbrain）</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrordirector.raspbian.org/raspbian/ stretch main contrib non-free rpi</span></span><br><span class="line">官方源</span><br><span class="line">deb <span class="string">https:</span><span class="comment">//archive.raspbian.org/raspbian/ stretch main contrib non-free rpi</span></span><br></pre></td></tr></table></figure></p>
<p>Jessie（选择其中一个即可，注意大小写及目录）<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">中科大</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.ustc.edu.cn/raspbian/raspbian/ jessie main contrib non-free rpi </span></span><br><span class="line">清华</span><br><span class="line">deb <span class="string">https:</span><span class="comment">//mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ jessie main contrib non-free rpi</span></span><br><span class="line">大连东软</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.neusoft.edu.cn/raspbian/raspbian/ jessie main contrib non-free rpi</span></span><br><span class="line">重庆大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.cqu.edu.cn/raspbian/raspbian/ jessie main contrib non-free rpi</span></span><br><span class="line">浙江大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.zju.edu.cn/raspbian/raspbian/ jessie main contrib non-free rpi</span></span><br><span class="line">阿里云</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.aliyun.com/raspbian/raspbian/ jessie main contrib non-free rpi </span></span><br><span class="line">搜狐</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.sohu.com/raspbian/raspbian/ jessie main contrib non-free rpi </span></span><br><span class="line">元智大学（中国台湾）</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//ftp.cse.yzu.edu.tw/Linux/raspbian/raspbian/ jessie main contrib non-free rpi </span></span><br><span class="line">新加坡国立大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirror.nus.edu.sg/raspbian/raspbian/ jessie main contrib non-free rpi</span></span><br><span class="line">北陆先端科学技术大学院大学（日本知名镜像站，日常出口带宽<span class="number">2</span>g）</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//ftp.jaist.ac.jp/raspbian/ jessie main contrib non-free rpi </span></span><br><span class="line">牛津大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirror.ox.ac.uk/sites/archive.raspbian.org/archive/raspbian/  jessie main contrib non-free rpi </span></span><br><span class="line">美国Berkely大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrors.ocf.berkeley.edu/raspbian/raspbian/ jessie main contrib non-free rpi</span></span><br><span class="line">美国俄克拉荷马大学</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//reflection.oss.ou.edu/raspbian/raspbian/ jessie main contrib non-free rpi</span></span><br><span class="line">南非知名软件源</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirror.liquidtelecom.com/raspbian/raspbian/ jessie main contrib non-free rpi </span></span><br><span class="line">默认源（带重定向by mirrorbrain）</span><br><span class="line">deb <span class="string">http:</span><span class="comment">//mirrordirector.raspbian.org/raspbian/ jessie main contrib non-free rpi</span></span><br><span class="line">官方源</span><br><span class="line">deb <span class="string">https:</span><span class="comment">//archive.raspbian.org/raspbian/ jessie main contrib non-free rpi</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/31/raspbian-sources/" data-id="cl8vfrwsc002uogc5fx8g53y0" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/raspbian/">raspbian</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-nginx" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/31/nginx/" class="article-date">
  <time datetime="2018-07-31T03:13:17.000Z" itemprop="datePublished">2018-07-31</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/nginx/">nginx</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/31/nginx/">nginx</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="tornado"><a href="#tornado" class="headerlink" title="tornado"></a>tornado</h5><p>Tornado是一种Web服务器软件的开源版本。Tornado和现在的主流Web服务器框架（包括大多数Python的框架）有着明显的区别：它是非阻塞式服务器，而且速度相当快。<br>得利于其非阻塞的方式和对epoll的运用，Tornado每秒可以处理数以千计的连接，因此Tornado是实时Web服务的一个理想框架。<code>pip install tarnado</code></p>
<h6 id="hello-tornado"><a href="#hello-tornado" class="headerlink" title="hello tornado"></a>hello tornado</h6><p>最小应用：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tornado.httpserver</span><br><span class="line"><span class="keyword">import</span> tornado.ioloop</span><br><span class="line"><span class="keyword">import</span> tornado.options</span><br><span class="line"><span class="keyword">import</span> tornado.web</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> tornado.options <span class="keyword">import</span> define, options</span><br><span class="line"></span><br><span class="line">define(<span class="string">"port"</span>, default=<span class="number">8001</span>, help=<span class="string">"run on the given port"</span>, type=int)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MainHandler</span><span class="params">(tornado.web.RequestHandler)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.write(<span class="string">"Hello, Tornado"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    tornado.options.parse_command_line()</span><br><span class="line">    application = tornado.web.Application([</span><br><span class="line">        (<span class="string">r"/"</span>, MainHandler),</span><br><span class="line">    ])</span><br><span class="line">    http_server = tornado.httpserver.HTTPServer(application)</span><br><span class="line">    http_server.listen(options.port)</span><br><span class="line">    tornado.ioloop.IOLoop.instance().start()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></p>
<h5 id="nginx"><a href="#nginx" class="headerlink" title="nginx"></a>nginx</h5><p>Nginx是一个高性能的HTTP和反向代理服务器，其特点是占有内存少，并发能力强。<br>反向代理（Reverse Proxy）方式是指以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。<br>安全反向代理有许多用途：</p>
<ol>
<li>可以提供从防火墙外部代理服务器到防火墙内部安全内容服务器的加密连接。</li>
<li>可以允许客户机安全地连接到代理服务器，从而有利于安全地传输信息（如信用卡号）。</li>
<li>安全反向代理会造成各安全连接因加密数据所涉及的系统开销而变慢。但是，由于 SSL 提供了高速缓存机制，所以连接双方可以重复使用先前协商的安全参数，从而大大降低后续连接的系统开销。</li>
</ol>
<h6 id="hello-nginx"><a href="#hello-nginx" class="headerlink" title="hello nginx"></a>hello nginx</h6><p>配置文件放在 /etc/nginx/sites-enabled<br>本来是放在 /etc/nginx/sites-available 然后用软链接链到/etc/nginx/sites-enabled<br>但我不知怎么链过去文件总是空白的，所以简单粗暴复制过去。<br>重启nginx<code>sudo /etc/init.d/nginx restart</code></p>
<h5 id="nginx-代理-tornado"><a href="#nginx-代理-tornado" class="headerlink" title="nginx 代理 tornado"></a>nginx 代理 tornado</h5><p>在/etc/nginx/sites-enabled创建配置文件<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># this is the real tornado service                                      </span></span><br><span class="line"><span class="attribute">upstream</span> tornado &#123;                                                       </span><br><span class="line">    <span class="attribute">server</span> <span class="number">127.0.0.1:8001</span>;  </span><br><span class="line">&#125;                                                                                                           </span><br><span class="line"><span class="section">server</span> &#123;                                                                </span><br><span class="line">    <span class="attribute">listen</span>   <span class="number">8000</span>;                                            </span><br><span class="line">    <span class="attribute">root</span> /var/www/tornado/; </span><br><span class="line">    <span class="attribute">index</span> app.py;                                              </span><br><span class="line">   </span><br><span class="line">    <span class="attribute">server_name</span> server;    </span><br><span class="line"></span><br><span class="line">    <span class="attribute">location</span> / &#123;                                                             </span><br><span class="line">        <span class="attribute">if</span> (!-e <span class="variable">$request_filename</span>) &#123;                                             </span><br><span class="line">            <span class="attribute">rewrite</span><span class="regexp"> ^/(.*)$</span> /center.py/<span class="variable">$1</span> <span class="literal">last</span>;                                      </span><br><span class="line">        &#125;                                                                      </span><br><span class="line">    &#125;                                                                       </span><br><span class="line">                                 </span><br><span class="line">    <span class="attribute">location</span> <span class="regexp">~ /</span> &#123;      </span><br><span class="line">        <span class="attribute">proxy_pass_header</span> Server;                                               </span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;                                  </span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;                              </span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Scheme <span class="variable">$scheme</span>;                                     </span><br><span class="line">        <span class="attribute">proxy_pass</span> http://tornado;   </span><br><span class="line">    &#125;                                                                      </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>所有 <a href="http://localhost:8000" target="_blank" rel="noopener">http://localhost:8000</a> 的请求都会转发到upstream tornado{}里面列出的服务里面。</p>
<h5 id="supervisor"><a href="#supervisor" class="headerlink" title="supervisor"></a>supervisor</h5><p>安装<code>sudo apt-get install supervisor</code><br>安装成功后,supervisor就会默认启动<br>将每个进程的配置文件单独拆分,放在/etc/supervisor/conf.d/目录下,以.conf作为扩展名<br>配置文件内容：<br><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">program:</span>tornado_hello]</span><br><span class="line">command=python <span class="regexp">/var/</span>www<span class="regexp">/tornado/</span>hello.py</span><br></pre></td></tr></table></figure></p>
<p>重启supervisor,让配置文件生效,然后启动test进程:<br><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">supervisorctl update</span></span><br><span class="line"><span class="attribute">supervisorctl</span></span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/31/nginx/" data-id="cl8vfrwrw0023ogc5xjbk5u5z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/nginx/">nginx</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tornado/">tornado</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-caffe-deploy" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/07/30/caffe-deploy/" class="article-date">
  <time datetime="2018-07-30T03:20:02.000Z" itemprop="datePublished">2018-07-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/caffe/">caffe</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/07/30/caffe-deploy/">caffe-deploy</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h5><p>Caffe，全称Convolutional Architecture for Fast Feature Embedding。是一种常用的深度学习框架，主要应用在视频、图像处理方面的应用上。<br>此次主要唠唠关于它的部署</p>
<h5 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h5><figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install libprotobuf-<span class="built_in">dev</span> libleveldb-<span class="built_in">dev</span> libsnappy-<span class="built_in">dev</span> libopencv-<span class="built_in">dev</span> libhdf5-serial-<span class="built_in">dev</span> protobuf-compiler</span><br><span class="line">sudo apt-<span class="built_in">get</span> install --no-install-recommends libboost-<span class="built_in">all</span>-<span class="built_in">dev</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> install libatlas-base-<span class="built_in">dev</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> install libhdf5-serial-<span class="built_in">dev</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> install python-<span class="built_in">dev</span></span><br><span class="line">sudo apt-<span class="built_in">get</span> install libgflags-<span class="built_in">dev</span> libgoogle-glog-<span class="built_in">dev</span> liblmdb-<span class="built_in">dev</span></span><br></pre></td></tr></table></figure>
<p>在caffe-master/python下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> req <span class="keyword">in</span> $(cat requirements.txt); <span class="keyword">do</span> pip install <span class="variable">$req</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure></p>
<h5 id="下载Caffe"><a href="#下载Caffe" class="headerlink" title="下载Caffe"></a>下载Caffe</h5><p><code>git clone https://github.com/BVLC/caffe.git</code>贼卡，可以去github用其他工具下载。<br>解压：<code>unzip -n caffe-master.zip -d ./</code></p>
<h5 id="安装caffe"><a href="#安装caffe" class="headerlink" title="安装caffe"></a>安装caffe</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">cd</span> <span class="selector-tag">caffe</span></span><br><span class="line"><span class="selector-tag">cp</span> <span class="selector-tag">Makefile</span><span class="selector-class">.config</span><span class="selector-class">.example</span> <span class="selector-tag">Makefile</span><span class="selector-class">.config</span></span><br></pre></td></tr></table></figure>
<p>在Makefile.config文件中把CPU_ONLY := 1的注释给去掉<br>修改如下:<br><figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/<span class="keyword">include</span> /usr/<span class="keyword">include</span>/hdf5/serial</span><br><span class="line">LIBRARY_DIRS := $(PYTHON_LIB) /usr/local/<span class="class"><span class="keyword">lib</span> /<span class="title">usr</span>/<span class="title">lib</span> /<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">x86_64</span>-<span class="title">linux</span>-<span class="title">gnu</span> /<span class="title">usr</span>/<span class="title">lib</span>/<span class="title">x86_64</span>-<span class="title">linux</span>-<span class="title">gnu</span>/<span class="title">hdf5</span>/<span class="title">serial</span></span></span><br></pre></td></tr></table></figure></p>
<p>计算能力 mkl &gt; openlas &gt;atlas，为了简便，默认atlas</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/30/caffe-deploy/" data-id="cl8vfrwq6000qogc5x4543i1w" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/caffe/">caffe</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/deploy/">deploy</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-vim" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/29/vim/" class="article-date">
  <time datetime="2018-05-29T03:05:59.000Z" itemprop="datePublished">2018-05-29</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/工具积累/">工具积累</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/29/vim/">vim</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h5 id="基础操作"><a href="#基础操作" class="headerlink" title="基础操作"></a>基础操作</h5><table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">记忆方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">:q</td>
<td style="text-align:center">退出</td>
<td style="text-align:center">quit</td>
</tr>
<tr>
<td style="text-align:center">:w</td>
<td style="text-align:center">存盘</td>
<td style="text-align:center">write</td>
</tr>
<tr>
<td style="text-align:center">:e</td>
<td style="text-align:center">打开新文件</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">:r</td>
<td style="text-align:center">读取文件</td>
<td style="text-align:center">read</td>
</tr>
<tr>
<td style="text-align:center">:!</td>
<td style="text-align:center">强行</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">:set nu</td>
<td style="text-align:center">显示行号</td>
<td style="text-align:center">number</td>
</tr>
<tr>
<td style="text-align:center">:set nonu</td>
<td style="text-align:center">隐藏行号</td>
<td style="text-align:center">no number</td>
</tr>
<tr>
<td style="text-align:center">Ctrl + f</td>
<td style="text-align:center">翻到下一页（向前翻页）</td>
<td style="text-align:center">front</td>
</tr>
<tr>
<td style="text-align:center">Ctrl + b</td>
<td style="text-align:center">翻到上一页（向后翻页）</td>
<td style="text-align:center">back</td>
</tr>
<tr>
<td style="text-align:center">Ctrl + u</td>
<td style="text-align:center">向前翻半页</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Ctrl + d</td>
<td style="text-align:center">向后翻半页</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">^</td>
<td style="text-align:center">移到行头</td>
<td style="text-align:center">往上就到行头了</td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:center">移到行尾</td>
<td style="text-align:center">写完一行就要给一行的钱</td>
</tr>
<tr>
<td style="text-align:center">w</td>
<td style="text-align:center">下一个单词</td>
<td style="text-align:center">word</td>
</tr>
<tr>
<td style="text-align:center">b</td>
<td style="text-align:center">前一个单词</td>
<td style="text-align:center">behind（在。。。后面）</td>
</tr>
<tr>
<td style="text-align:center">e</td>
<td style="text-align:center">下一单词尾</td>
<td style="text-align:center">end</td>
</tr>
<tr>
<td style="text-align:center">#G</td>
<td style="text-align:center">跳到某一行</td>
<td style="text-align:center">大哥(G)说到哪就到哪</td>
</tr>
<tr>
<td style="text-align:center">i</td>
<td style="text-align:center">光标前插入</td>
<td style="text-align:center">insert</td>
</tr>
<tr>
<td style="text-align:center">a</td>
<td style="text-align:center">光标后加入</td>
<td style="text-align:center">add</td>
</tr>
<tr>
<td style="text-align:center">A</td>
<td style="text-align:center">在行末加入</td>
<td style="text-align:center">在一个词后是小a,一个行后就是大A</td>
</tr>
<tr>
<td style="text-align:center">o</td>
<td style="text-align:center">另起一行加入</td>
<td style="text-align:center">一个小鸡蛋（小o）掉下来了摔开了花</td>
</tr>
<tr>
<td style="text-align:center">O</td>
<td style="text-align:center">上一行加入</td>
<td style="text-align:center">吐一个大泡泡（大O）飞上去破了</td>
</tr>
</tbody>
</table>
<h5 id="行内删除"><a href="#行内删除" class="headerlink" title="行内删除"></a>行内删除</h5><table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">记忆方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">cw</td>
<td style="text-align:center">删除一个单词（一部分不包括空格）</td>
<td style="text-align:center">吃掉一个 word</td>
</tr>
<tr>
<td style="text-align:center">c$</td>
<td style="text-align:center">删除一行到行尾</td>
<td style="text-align:center">刚写的一行被删了，钱也拿不到了</td>
</tr>
<tr>
<td style="text-align:center">c^</td>
<td style="text-align:center">删除一行到行头</td>
<td style="text-align:center">往上吃，一直吃到头         </td>
</tr>
<tr>
<td style="text-align:center">x</td>
<td style="text-align:center">删除一个字符</td>
<td style="text-align:center">看你不爽就打上“x”</td>
</tr>
</tbody>
</table>
<h5 id="删除操作"><a href="#删除操作" class="headerlink" title="删除操作"></a>删除操作</h5><table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">记忆方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">dd</td>
<td style="text-align:center">删除一行</td>
<td style="text-align:center">del dir</td>
</tr>
<tr>
<td style="text-align:center">dw</td>
<td style="text-align:center">删除单词到尾部（包括空格）</td>
<td style="text-align:center">del word</td>
</tr>
<tr>
<td style="text-align:center">de</td>
<td style="text-align:center">删除单词到尾部（不包括尾部空格）</td>
<td style="text-align:center">del end</td>
</tr>
<tr>
<td style="text-align:center">d$</td>
<td style="text-align:center">删除当前到行尾的所有字符</td>
<td style="text-align:center">del $(代表尾部)</td>
</tr>
<tr>
<td style="text-align:center">d^</td>
<td style="text-align:center">删除当前到行首的所有字符</td>
<td style="text-align:center">del ^(代表行首)</td>
</tr>
<tr>
<td style="text-align:center">J</td>
<td style="text-align:center">合并当前行</td>
<td style="text-align:center">一个大钩子(J)把下面的一行拉到自己行尾</td>
</tr>
<tr>
<td style="text-align:center">u</td>
<td style="text-align:center">撤销上次操作</td>
<td style="text-align:center">undo</td>
</tr>
<tr>
<td style="text-align:center">U</td>
<td style="text-align:center">撤销当前行所有操作</td>
<td style="text-align:center">事情闹大了，得有个更大的UNDO才能恢复</td>
</tr>
<tr>
<td style="text-align:center">Ctrl + r</td>
<td style="text-align:center">恢复undo</td>
<td style="text-align:center">recover</td>
</tr>
</tbody>
</table>
<h5 id="复制粘贴"><a href="#复制粘贴" class="headerlink" title="复制粘贴"></a>复制粘贴</h5><table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">记忆方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">yy</td>
<td style="text-align:center">复制当前行整行的内容到缓冲区</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">p</td>
<td style="text-align:center">读取缓冲区中的内容，并粘贴到光标当前的位置</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h5 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h5><table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">记忆方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">/word</td>
<td style="text-align:center">从上而下查</td>
<td style="text-align:center">/是从上而下写的吧</td>
</tr>
<tr>
<td style="text-align:center">?word</td>
<td style="text-align:center">从下而上查找</td>
<td style="text-align:center">字符在哪儿呢（？）回头找找吧</td>
</tr>
<tr>
<td style="text-align:center">n</td>
<td style="text-align:center">定位下一个匹配的</td>
<td style="text-align:center">相当于向下查找下一个 next</td>
</tr>
<tr>
<td style="text-align:center">N</td>
<td style="text-align:center">定位上一个匹配的</td>
<td style="text-align:center">相当于向上查找上一个</td>
</tr>
</tbody>
</table>
<h5 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h5><table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">记忆方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">:s/1/2</td>
<td style="text-align:center">搜索当前行第一个1并用2代替</td>
<td style="text-align:center">search</td>
</tr>
<tr>
<td style="text-align:center">:s/1/2/g</td>
<td style="text-align:center">搜索当前行所有的1并用2代替</td>
<td style="text-align:center">global</td>
</tr>
<tr>
<td style="text-align:center">:#,#s/1/2/g</td>
<td style="text-align:center">在#,#间搜索所有1并用2替换</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">:%s/1/2/g</td>
<td style="text-align:center">在整个文档中将1替换为2</td>
<td style="text-align:center">100％（全部）</td>
</tr>
<tr>
<td style="text-align:center">:s/1/2/c</td>
<td style="text-align:center">每次替换都给出提示确认</td>
<td style="text-align:center">cue提示</td>
</tr>
<tr>
<td style="text-align:center">r</td>
<td style="text-align:center">取代光标所在处的字符</td>
<td style="text-align:center">replace</td>
</tr>
<tr>
<td style="text-align:center">R</td>
<td style="text-align:center">取代字符直到按Esc为止</td>
<td style="text-align:center">强力replace</td>
</tr>
</tbody>
</table>
<h5 id="多文件"><a href="#多文件" class="headerlink" title="多文件"></a>多文件</h5><table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">记忆方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">:args</td>
<td style="text-align:center">显示多文件信息(会在末行提示当前打开了哪些档)</td>
<td style="text-align:center">are globals</td>
</tr>
<tr>
<td style="text-align:center">:next</td>
<td style="text-align:center">切换到下一个文件</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">:prev</td>
<td style="text-align:center">切换到上一个文件</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">:first</td>
<td style="text-align:center">定位首文件</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">:last</td>
<td style="text-align:center">定位尾文件</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">Ctrl + ^</td>
<td style="text-align:center">快速切换到编辑器中切换前的文件</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<h5 id="光标移动"><a href="#光标移动" class="headerlink" title="光标移动"></a>光标移动</h5><table>
<thead>
<tr>
<th style="text-align:center">命令</th>
<th style="text-align:center">操作</th>
<th style="text-align:center">记忆方法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">)</td>
<td style="text-align:center">光标移至句尾</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">}</td>
<td style="text-align:center">光标移至段落开头</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">n+</td>
<td style="text-align:center">光标下移n行</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">n-</td>
<td style="text-align:center">光标上移n行</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">n$</td>
<td style="text-align:center">光标移至第n行尾</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">H</td>
<td style="text-align:center">光标移至屏幕顶行</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">M</td>
<td style="text-align:center">光标移至屏幕中间行</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">L</td>
<td style="text-align:center">光标移至屏幕最后行</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">0（数字）</td>
<td style="text-align:center">光标移至当前行首</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">$</td>
<td style="text-align:center">光标移至当前行尾</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">nz</td>
<td style="text-align:center">将第n行滚至屏幕顶部，不指定n时将当前行滚至屏幕顶部</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/29/vim/" data-id="cl8vfrwvt007iogc5qvmkaf82" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vim/">vim</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-pipipi" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/22/pipipi/" class="article-date">
  <time datetime="2018-05-22T15:09:38.000Z" itemprop="datePublished">2018-05-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Raspberry-Pi/">Raspberry Pi</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/22/pipipi/">Raspberry Pi</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>以下部分是以CentOs为例，但发现使用不方便，故丢在引用里，以Raspbain为例重写。</p>
<blockquote><br>##### 系统烧录<br><a href="http://shumeipai.nxez.com/raspberry-pi-os-collection" target="_blank" rel="noopener">适用于树莓派的系统列表</a><br>这次用CentOs做例子讲解<br><a href="http://mirror.centos.org/altarch/7/isos/armhfp/" target="_blank" rel="noopener">CentOs系统镜像列表</a><br>下载下来的后缀为.raw.xz的文件要解压成.raw<br>然后用Win32DiskImager工具烧录到闪存卡<br>将闪存卡插入树莓派，通电，连接网线。<br>##### 局域网连接<br>树莓派算是做好了，如何食用呢？<br>###### 有路由器<br>将电脑和树莓派用网线连接到同一路由器<br>1. 如果有路由器访问权限，直接查看树莓派的IP地址<br>2. 用ipscaner工具可以查看同意局域网内的设备IP地址<br><br>###### 无路由器<br>电脑联网并将网络设置为共享模式<br>树莓派用网线连接电脑（可用网线转接器）<br>cmd输入命令<code>arp -a</code><br>在接口197.168.137.1下面的第一个IP地址即为电脑共享给树莓派的IP<br><br>获得了IP就好说话了，用putty也好cmder也好，只要支持ssh访问的都行<br>命令<code>ssh username@ip</code>即可连接<br><br>##### 初始化配置<br>###### SD卡扩展到实际容量<br>在终端中输入<code>fdisk /dev/mmcblk0</code>进入硬盘分区软件<br>在软件中输入：<br>p——查看旧分区情况<br>d——删除分区，并按照提示删除第三个分区<br>n——添加一个分区，空间起始位置按照系统默认（默认是最大空间）<br>p——查看新分区情况<br>w——写入分区信息并退出软件<br>在终端中输入：<code>sudo reboot</code>重启树莓派<br>在树莓派开机后在终端输入： <code>resize2fs /dev/mmcblk0p3</code>重新加载分区信息<br>使用：<code>df -h</code>查看新的分区信息表<br>###### 设置网络配置信息<br><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmcli  d  wifi　　<span class="comment">#查看周围的wifi</span></span><br><span class="line">nmcli d wifi <span class="keyword">connect</span> yourSSID password <span class="string">'yourpassword'</span>  <span class="comment">#连接wifi  </span></span><br><span class="line">nmcli d  show wlan<span class="number">0</span>  <span class="comment">#查看wlan0的状态</span></span><br></pre></td></tr></table></figure><br><br>接下来设置网络配置信息<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vi etc/sysconfig/network-scripts/ifcfg-0000   <span class="comment">#0000是wifi的名字</span></span><br><span class="line"></span><br><span class="line">BOOTPROTO=static              <span class="comment">#静态IP</span></span><br><span class="line">IPADDR=192.168.0.160       <span class="comment">#IP地址</span></span><br><span class="line">GATEWAY=192.168.1.1    <span class="comment">#默认网关</span></span><br><span class="line">NETMASK=255.255.255.0  <span class="comment">#子网掩码</span></span><br></pre></td></tr></table></figure><br><br>###### 创建新用户<br>新建用户并初始化密码：<br><figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">adduser </span>yourusername</span><br><span class="line"><span class="symbol">passwd</span> yourusername</span><br></pre></td></tr></table></figure><br><br>linux会判断密码复杂度，不过可以强行忽略<br>给新建用户授权：<br>新创建的用户并不能使用sudo命令，需要给他添加授权。<br>sudo命令的授权管理是在sudoers文件里的<br><figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># ls -l /etc/sudoers</span></span><br><span class="line">-r--r-----.<span class="number"> 1 </span>root root<span class="number"> 3938 </span>Apr<span class="number"> 10 </span>20:27 /etc/sudoers</span><br></pre></td></tr></table></figure><br><br>只有只读的权限，如果想要修改的话，需要先添加w权限<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># chmod -v u+w /etc/sudoers</span></span><br><span class="line">mode <span class="keyword">of</span> ‘/etc/sudoers’ changed <span class="keyword">from</span> <span class="number">0440</span> (r--r-----) <span class="keyword">to</span> <span class="number">0640</span> (rw-r-----)</span><br></pre></td></tr></table></figure><br><br>然后就可以添加内容了<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@localhost</span> /]<span class="meta"># vi /etc/sudoers</span></span><br></pre></td></tr></table></figure><br><br>在下面的一行下追加新增的用户:<br><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Allow root to run any commands anywher  </span></span><br><span class="line"><span class="attribute">root</span>    <span class="literal">ALL</span>=(<span class="literal">ALL</span>)       <span class="literal">ALL</span>  </span><br><span class="line"><span class="attribute">Hodge</span>  <span class="literal">ALL</span>=(<span class="literal">ALL</span>)       <span class="literal">ALL</span>  #这个是新增的用户</span><br></pre></td></tr></table></figure><br><br>记得将写权限收回:<br><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost /]<span class="comment"># chmod -v u-w /etc/sudoers</span></span><br><span class="line">mode <span class="keyword">of</span> ‘/etc/sudoers’ changed <span class="keyword">from</span> <span class="number">0640</span> (rw-r-----) <span class="keyword">to</span> <span class="number">0440</span> (r--r-----)</span><br></pre></td></tr></table></figure><br><br>###### 更换阿里源<br>1. 备份<br><code>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</code><br>2. 下载新的CentOS-Base.repo 到/etc/yum.repos.d/<br><code>wget http://mirrors.aliyun.com/repo/Centos-altarch-7.repo -O /etc/yum.repos.d/CentOS-Base.repo</code><br>3. 初始化<br><figure class="highlight autoit"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root<span class="symbol">@localhost</span> yum.repos.d]<span class="meta"># yum clean all</span></span><br><span class="line">[root<span class="symbol">@localhost</span> yum.repos.d]<span class="meta"># yum makecache</span></span><br></pre></td></tr></table></figure><br><br></blockquote>

<h5 id="系统烧录"><a href="#系统烧录" class="headerlink" title="系统烧录"></a>系统烧录</h5><p><a href="http://shumeipai.nxez.com/raspberry-pi-os-collection" target="_blank" rel="noopener">适用于树莓派的系统列表</a><br>这次用Raspbain做例子讲解<br><a href="https://www.raspberrypi.org/downloads/" target="_blank" rel="noopener">Raspbain系统下载</a><br>下载下来的后缀为.zip的文件要解压成.img<br>然后用Win32DiskImager工具烧录到闪存卡<br>将闪存卡插入树莓派，通电，连接网线。</p>
<h5 id="局域网连接"><a href="#局域网连接" class="headerlink" title="局域网连接"></a>局域网连接</h5><p>树莓派算是做好了，如何食用呢？</p>
<h6 id="有路由器"><a href="#有路由器" class="headerlink" title="有路由器"></a>有路由器</h6><p>将电脑和树莓派用网线连接到同一路由器</p>
<ol>
<li>如果有路由器访问权限，直接查看树莓派的IP地址</li>
<li>用ipscaner工具可以查看同意局域网内的设备IP地址</li>
</ol>
<h6 id="无路由器"><a href="#无路由器" class="headerlink" title="无路由器"></a>无路由器</h6><p>电脑联网并将网络设置为共享模式<br>树莓派用网线连接电脑（可用网线转接器）<br>cmd输入命令<code>arp -a</code><br>在接口197.168.137.1下面的第一个IP地址即为电脑共享给树莓派的IP<br>可用ping命令测试</p>
<p>获得了IP就好说话了，用putty也好cmder也好，只要支持ssh访问的都行<br>命令<code>ssh username@ip</code>即可连接</p>
<h6 id="关于ssh"><a href="#关于ssh" class="headerlink" title="关于ssh"></a>关于ssh</h6><p>获取树莓派IP后用ssh工具连接时可能出现连接被拒绝等报错<br>可参考：<a href="http://shumeipai.nxez.com/2017/02/27/raspbian-ssh-connection-refused.html" target="_blank" rel="noopener">树莓派新系统SSH连接被拒绝的解决方法</a></p>
<h5 id="初始化配置"><a href="#初始化配置" class="headerlink" title="初始化配置"></a>初始化配置</h5><h6 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h6><p><code>sudo passwd pi</code></p>
<h6 id="开启root用户"><a href="#开启root用户" class="headerlink" title="开启root用户"></a>开启root用户</h6><p>由于root用户默认密码为空，因此无法登陆。登陆默认用户pi给root设置密码后即可开启root用户<br>可使用<code>su - root</code>切换用户</p>
<h6 id="SD卡扩展到实际容量"><a href="#SD卡扩展到实际容量" class="headerlink" title="SD卡扩展到实际容量"></a>SD卡扩展到实际容量</h6><p>使用：<code>df -h</code>查看新的分区信息表<br>最新的Raspbain系统已自动充分利用闪存卡空间了，无需额外设置。</p>
<h6 id="设置网络配置信息"><a href="#设置网络配置信息" class="headerlink" title="设置网络配置信息"></a>设置网络配置信息</h6><p>连接无线网：</p>
<ol>
<li>用户可以在未启动树莓派的状态下单独修改 /boot/wpa_supplicant.conf 文件（内存卡插电脑）配置 WiFi 的 SSID 和密码，这样树莓派启动后会自行读取 wpa_supplicant.conf 配置文件连接 WiFi 设备。</li>
<li>树莓派启动状态下使用<code>sudo nano /etc/wpa_supplicant/wpa_supplicant.conf</code>打开该文件</li>
</ol>
<p>编辑内容如下：<br><figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">country=CN</span><br><span class="line">ctrl_interface=DIR=/var/run/wpa_supplicant GROUP=netdev</span><br><span class="line">update_config=1</span><br><span class="line"> </span><br><span class="line">network=&#123;</span><br><span class="line">ssid=<span class="string">"WiFi-A"</span></span><br><span class="line">psk=<span class="string">"12345678"</span></span><br><span class="line">key_mgmt=WPA-PSK</span><br><span class="line">priority=1</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">network=&#123;</span><br><span class="line">ssid=<span class="string">"WiFi-B"</span></span><br><span class="line">psk=<span class="string">"12345678"</span></span><br><span class="line">key_mgmt=WPA-PSK</span><br><span class="line">priority=2</span><br><span class="line">scan_ssid=1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ssid:网络的ssid<br>psk:密码<br>priority:连接优先级，数字越大优先级越高（不可以是负数）<br>scan_ssid:连接隐藏WiFi时需要指定该值为1<br>如果你的 WiFi 没有密码或使用WEP加密<code>key_mgmt=NONE</code><br>如果你的 WiFi 使用WPA/WPA2加密<code>key_mgmt=WPA-PSK</code></p>
<p>配置静态IP：<br>修改/etc/dhcpcd.conf 文件<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">interface eth0</span><br><span class="line"></span><br><span class="line">static <span class="attribute">ip_address</span>=192.168.0.10/24</span><br><span class="line">static <span class="attribute">routers</span>=192.168.0.1</span><br><span class="line">static <span class="attribute">domain_name_servers</span>=192.168.0.1</span><br><span class="line"></span><br><span class="line">interface wlan0</span><br><span class="line"></span><br><span class="line">static <span class="attribute">ip_address</span>=192.168.0.200/24</span><br><span class="line">static <span class="attribute">routers</span>=192.168.0.1</span><br><span class="line">static <span class="attribute">domain_name_servers</span>=192.168.0.1</span><br></pre></td></tr></table></figure></p>
<p>上面的配置文件中 , eth0是有线的配置  , wlan0是无线配置<br>ip_address就是静态IP , 后面要接/24<br>routers是网关<br>static domain_name_servers是DNS</p>
<h6 id="更换软件源"><a href="#更换软件源" class="headerlink" title="更换软件源"></a>更换软件源</h6><p>选取<a href="https://lug.ustc.edu.cn/wiki/mirrors/help/raspbian" target="_blank" rel="noopener">中科大的软件源</a></p>
<ol>
<li>备份<br><code>mv /etc/apt/sources.list /etc/apt/sources.list.backup</code></li>
<li><p>新建sources.list并写入如下内容</p>
<figure class="highlight crystal"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">deb <span class="symbol">http:</span>/<span class="regexp">/mirrors.ustc.edu.cn/raspbian</span><span class="regexp">/raspbian/</span> jessie main non-free contrib</span><br><span class="line">deb-src <span class="symbol">http:</span>/<span class="regexp">/mirrors.ustc.edu.cn/raspbian</span><span class="regexp">/raspbian/</span> jessie main non-free contrib</span><br></pre></td></tr></table></figure>
</li>
<li><p>更新软件列表</p>
<figure class="highlight q"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> <span class="keyword">update</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="架设服务器"><a href="#架设服务器" class="headerlink" title="架设服务器"></a>架设服务器</h5><ol>
<li><p>安装Apache2</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install apache2</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装sqlite</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install sqlite</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h5 id="远程访问"><a href="#远程访问" class="headerlink" title="远程访问"></a>远程访问</h5><h6 id="远程桌面"><a href="#远程桌面" class="headerlink" title="远程桌面"></a>远程桌面</h6><p>局域网内windows远程桌面连接树莓派</p>
<ol>
<li><p>必须先安装tightvncserver！！！</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install tightvncserver</span><br></pre></td></tr></table></figure>
</li>
<li><p>再安装xrdp服务。</p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-<span class="builtin-name">get</span> install xrdp</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>打开Windows的远程桌面功能再输入目标局域网IP即可连接。</p>
<h6 id="nat123"><a href="#nat123" class="headerlink" title="nat123"></a>nat123</h6><p>环境安装：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">apt-get  update  //更新，新系统推荐运行</span></span><br><span class="line"><span class="meta">#</span><span class="bash">apt-get  install  mono-complete  //安装运行环境，一路YES下去</span></span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="built_in">cd</span>  /mnt                                        //  mnt为你想要安装nat123的目录</span></span><br><span class="line"><span class="meta">#</span><span class="bash">wget  http://www.nat123.com/down/nat123linux.tar.gz  //下载软件</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tar  -zxvf  nat123linux.tar.gz     //解压</span></span><br><span class="line"><span class="meta">#</span><span class="bash">mono  nat123linux.sh         //运行</span></span><br></pre></td></tr></table></figure></p>
<p>运行并按提示依次输入自己的帐号和密码、运行成功<br>当然你不想这个程序一直占用你的屏幕，接下来输入x 回车退出软件<br>我们要客户端后台服务启动，这样才清爽：<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-id">#cd</span>  /mnt                   <span class="comment">//将mnt换成是自己本地实际安装目录</span></span><br><span class="line"><span class="selector-id">#mono</span>  nat123linux<span class="selector-class">.sh</span> service &amp;</span><br></pre></td></tr></table></figure></p>
<p>运行显示 nat123 service is running…. 就ok啦 按下回车键 就可以将其后台运行了<br>如果你还是不放心，可查看其运行情况：<code>ps -ef|grep nat123</code><br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pi       23599 23577  5 02:45 pts/0    00:00:02 mono nat123linux.sh service</span><br><span class="line">pi       23688 23577  0 02:46 pts/0    00:00:00 grep <span class="attribute">--color</span>=auto nat123</span><br></pre></td></tr></table></figure></p>
<p>至此树莓派raspbian/Linux上软件的配置与运行登录完成~~~~</p>
<p>终于到了重头戏了<br>端口映射配置<br>登录到 <a href="http://www.nat123.com/UsersNatItem.jsp" target="_blank" rel="noopener">http://www.nat123.com/UsersNatItem.jsp</a><br>在映射编辑页面：<br>应用类型：因为全端口映射需要安装nat123的软件才可以访问内网，故不再折腾<br>重点讲80网站类型和其他（非网站类型）</p>
<ol>
<li>80网站类型、映射线路默认、应用名称（随你咯）、内网端口为80、内网地址为树莓派静态IP地址、外网域名<br>确认保存后在自己的域名解析管理网站将DNS服务器或NS设置为dns1.dns123.net/dns3.dns123.net；或者将cname设置为指定值</li>
<li>其他（非网站类型）一般用来做ssh连接或远程桌面连接<br>映射线路默认、应用名称（随你咯）、内网端口ssh为22，xrdp为3350、内网地址为树莓派静态IP地址、外网端口按要求设置、外网域名<br>确认保存后在自己的域名解析管理网站将DNS服务器或NS设置为dns1.dns123.net/dns3.dns123.net；或者将cname设置为指定值</li>
</ol>
<p>nat123自启动<br>要保证在断网、断电、重启后nat123服务自动启动：</p>
<ol>
<li><p>编写autonat123.sh脚本放在/mnt目录下：</p>
<figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cd /home/<span class="built_in">pi</span>/Public/nat123</span><br><span class="line"><span class="meta">#echo <span class="meta-string">"1"</span> &gt; times.log</span></span><br><span class="line">ps -fe|grep nat123linux.sh |grep -v grep</span><br><span class="line"><span class="keyword">if</span> [ $? -ne <span class="number">0</span> ];<span class="keyword">then</span></span><br><span class="line">var=`<span class="built_in">date</span> +%Y/%m/%d-%H:%M:%S`</span><br><span class="line"><span class="built_in">echo</span> $var &gt;&gt; runtimes.<span class="built_in">log</span></span><br><span class="line">mono nat123linux.sh autologin username passwd</span><br><span class="line"><span class="meta">#<span class="meta-keyword">else</span></span></span><br><span class="line"><span class="meta">#echo <span class="meta-string">".....nat123linux.....is.........runing......................."</span></span></span><br><span class="line">fi</span><br></pre></td></tr></table></figure>
</li>
<li><p>通过<code>crontab -e</code>设置自动任务，每10小时运行autonat123.sh<br>将以下指令加入文件最后<code>0 */10 * * * cd /mnt &amp;&amp; sh autonat123.sh</code></p>
</li>
<li>将autonat123.sh脚本加入开机自启动：<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/rc.<span class="keyword">local</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>加入启动指令<code>sh /mnt/autonat123.sh</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/22/pipipi/" data-id="cl8vfrwsc002nogc53nr845ro" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CentOs/">CentOs</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Raspberry-Pi/">Raspberry Pi</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-cs231n" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/05/18/cs231n/" class="article-date">
  <time datetime="2018-05-18T07:51:40.000Z" itemprop="datePublished">2018-05-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CS231n/">CS231n</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/05/18/cs231n/">起步与KNN</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>基于卷积神经网络（CNN）的视觉识别</p>
<h5 id="挑战"><a href="#挑战" class="headerlink" title="挑战"></a>挑战</h5><ol>
<li>视觉点变化，观察的视角差异</li>
<li>规模尺度变化,巨人与小恶魔</li>
<li>内容可能是形态可变化的，扭曲的猫</li>
<li>观察物被遮挡</li>
<li>光照条件影响及其大</li>
<li>背景图像的影响</li>
<li>类型内的影响，比如‘主持人’这一分类范围较广</li>
</ol>
<h5 id="图片分类流程："><a href="#图片分类流程：" class="headerlink" title="图片分类流程："></a>图片分类流程：</h5><ol>
<li>输入：N张图片组成的数据集，每张图片有一个明确的label</li>
<li>学习：利用数据集去学习每个label的特征，称之为“训练一个分类器”或“学习一个模型”</li>
<li>评估：用新的数据集去测试训练好的分类器，计算准确率</li>
</ol>
<h5 id="Nearest-Neighbor-Classifier"><a href="#Nearest-Neighbor-Classifier" class="headerlink" title="Nearest Neighbor Classifier"></a>Nearest Neighbor Classifier</h5><p>最近邻分类器和CNN无关、也极少用于实践，但能帮我们了解图片分类问题<br>思路：对于训练集，读取成为长*宽*3的矩阵。对于测试集，与前面训练集中的图片比较，找出与其最相似的图片则他们分为一类<br>图片比较方法：<br>1、计算两矩阵中对应两两位置的差值的和<br><img src="http://cs231n.github.io/assets/nneg.jpeg" alt="L1 distance"><br>2、计算两矩阵中对应两两位置的差值的平方和然后再开根号<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Evaluate <span class="keyword">on</span> <span class="keyword">the</span> test <span class="keyword">set</span> only a single <span class="built_in">time</span>, <span class="keyword">at</span> <span class="keyword">the</span> very <span class="keyword">end</span>.</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将您的训练集分成训练集和验证集。使用验证集来调整所有超参数。最后在测试集上运行一次并报告性能。</span><br></pre></td></tr></table></figure>
<p>Nearest Neighbor Classifier 的优缺点：优点：简单易懂，低训练成本。缺点：测试成本过高。逐像素距离根本不对应于感知或语义相似性。</p>
<h5 id="交叉验证"><a href="#交叉验证" class="headerlink" title="交叉验证"></a>交叉验证</h5><p>在给定的建模样本中，拿出大部分样本进行建模型，留小部分样本用刚建立的模型进行预报，并求这小部分样本的预报误差，记录它们的平方加和。这个过程一直进行，直到所有的样本都被预报了一次而且仅被预报一次。把每个样本的预报误差平方加和，称为PRESS(predicted Error Sum of Squares)。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/05/18/cs231n/" data-id="cl8vfrwqm0012ogc5xu4k1y0z" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/神经网络/">神经网络</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&laquo; __('prev')</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/">__('next') &raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/30-N天自制操作系统/">30*N天自制操作系统</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/CS231n/">CS231n</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PyTorch笔记/">PyTorch笔记</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python踩坑指南/">Python踩坑指南</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Raspberry-Pi/">Raspberry Pi</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/caffe/">caffe</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/nginx/">nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/raspbian/">raspbian</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/函数库/">函数库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/参考手册/">参考手册</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/学习方法/">学习方法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/工具积累/">工具积累</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/整理/">整理</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/爬虫/">爬虫</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/目标检测/">目标检测</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/神经网络/">神经网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读论文/">读论文</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/API/">API</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AlexNet/">AlexNet</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Array/">Array</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Attention-Network/">Attention Network</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CentOs/">CentOs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP基础/">HTTP基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LeetCode/">LeetCode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MLP/">MLP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Raspberry-Pi/">Raspberry Pi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/String/">String</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/caffe/">caffe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/deploy/">deploy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ffmpeg/">ffmpeg</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/lda/">lda</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/object-detect/">object_detect</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/os/">os</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pytorch/">pytorch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/raspbian/">raspbian</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/scrapy/">scrapy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sort/">sort</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tornado/">tornado</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/twitter/">twitter</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/union-find/">union-find</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/web/">web</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/下载/">下载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/代理的基本原理/">代理的基本原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/会话与Cookies/">会话与Cookies</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/函数/">函数</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/包使用/">包使用</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/双系统/">双系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/字符串处理/">字符串处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/工具/">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/快捷键/">快捷键</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/整理/">整理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件读取/">文件读取</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/汇编/">汇编</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫原理/">爬虫原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫基础库/">爬虫基础库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫实践/">爬虫实践</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫解析库/">爬虫解析库</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/神经网络/">神经网络</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/笔记/">笔记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网页基础/">网页基础</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/视频处理/">视频处理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/读论文/">读论文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/阅读/">阅读</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/API/" style="font-size: 10px;">API</a> <a href="/tags/AlexNet/" style="font-size: 10px;">AlexNet</a> <a href="/tags/Array/" style="font-size: 12.5px;">Array</a> <a href="/tags/Attention-Network/" style="font-size: 10px;">Attention Network</a> <a href="/tags/CentOs/" style="font-size: 10px;">CentOs</a> <a href="/tags/HTTP基础/" style="font-size: 10px;">HTTP基础</a> <a href="/tags/LeetCode/" style="font-size: 17.5px;">LeetCode</a> <a href="/tags/MLP/" style="font-size: 10px;">MLP</a> <a href="/tags/Raspberry-Pi/" style="font-size: 10px;">Raspberry Pi</a> <a href="/tags/String/" style="font-size: 10px;">String</a> <a href="/tags/caffe/" style="font-size: 12.5px;">caffe</a> <a href="/tags/deploy/" style="font-size: 10px;">deploy</a> <a href="/tags/ffmpeg/" style="font-size: 10px;">ffmpeg</a> <a href="/tags/git/" style="font-size: 12.5px;">git</a> <a href="/tags/lda/" style="font-size: 10px;">lda</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/markdown/" style="font-size: 10px;">markdown</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/object-detect/" style="font-size: 10px;">object_detect</a> <a href="/tags/os/" style="font-size: 10px;">os</a> <a href="/tags/python/" style="font-size: 20px;">python</a> <a href="/tags/pytorch/" style="font-size: 20px;">pytorch</a> <a href="/tags/raspbian/" style="font-size: 12.5px;">raspbian</a> <a href="/tags/scrapy/" style="font-size: 10px;">scrapy</a> <a href="/tags/sort/" style="font-size: 12.5px;">sort</a> <a href="/tags/tornado/" style="font-size: 10px;">tornado</a> <a href="/tags/twitter/" style="font-size: 10px;">twitter</a> <a href="/tags/union-find/" style="font-size: 10px;">union-find</a> <a href="/tags/vim/" style="font-size: 10px;">vim</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/下载/" style="font-size: 10px;">下载</a> <a href="/tags/代理的基本原理/" style="font-size: 10px;">代理的基本原理</a> <a href="/tags/会话与Cookies/" style="font-size: 10px;">会话与Cookies</a> <a href="/tags/函数/" style="font-size: 12.5px;">函数</a> <a href="/tags/包使用/" style="font-size: 10px;">包使用</a> <a href="/tags/双系统/" style="font-size: 10px;">双系统</a> <a href="/tags/字符串处理/" style="font-size: 15px;">字符串处理</a> <a href="/tags/工具/" style="font-size: 10px;">工具</a> <a href="/tags/快捷键/" style="font-size: 10px;">快捷键</a> <a href="/tags/整理/" style="font-size: 10px;">整理</a> <a href="/tags/文件读取/" style="font-size: 15px;">文件读取</a> <a href="/tags/汇编/" style="font-size: 10px;">汇编</a> <a href="/tags/爬虫/" style="font-size: 15px;">爬虫</a> <a href="/tags/爬虫原理/" style="font-size: 10px;">爬虫原理</a> <a href="/tags/爬虫基础库/" style="font-size: 10px;">爬虫基础库</a> <a href="/tags/爬虫实践/" style="font-size: 10px;">爬虫实践</a> <a href="/tags/爬虫解析库/" style="font-size: 10px;">爬虫解析库</a> <a href="/tags/神经网络/" style="font-size: 20px;">神经网络</a> <a href="/tags/笔记/" style="font-size: 12.5px;">笔记</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/网页基础/" style="font-size: 10px;">网页基础</a> <a href="/tags/视频处理/" style="font-size: 10px;">视频处理</a> <a href="/tags/读论文/" style="font-size: 10px;">读论文</a> <a href="/tags/阅读/" style="font-size: 10px;">阅读</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/10/05/test-new-begin/">test_new_begin</a>
          </li>
        
          <li>
            <a href="/2020/03/14/LeetCode-String/">LeetCode_String</a>
          </li>
        
          <li>
            <a href="/2020/03/09/read/">read</a>
          </li>
        
          <li>
            <a href="/2020/03/08/sort-out/">sort_out</a>
          </li>
        
          <li>
            <a href="/2020/02/19/CVTEpro/">CVTEpro</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 Hodge Li<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>